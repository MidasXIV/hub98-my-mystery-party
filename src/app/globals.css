
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* CSS Reset & base styles */
*, *::before, *::after {
  box-sizing: border-box;
}

@font-face {
  font-display: swap;
  font-family: Mori;
  font-style: normal;
  font-weight: 400;
  src: url(https://gsap.com/fonts/Mori/PPMori-Regular.woff) format('woff');
}
@font-face {
  font-display: swap;
  font-family: Mori;
  font-style: normal;
  font-weight: 600;
  src: url(https://gsap.com/fonts/Mori/PPMori-SemiBold.woff) format('woff');
}
@font-face {
  font-display: swap;
  font-family: Fraktion Mono;
  font-style: normal;
  font-weight: 400;
  src: url(https://gsap.com/fonts/Fraktion/PPFraktionMono-Bold.woff) format('woff');
}

:root {
  --accent: oklch(0.97 0 0);
  --font-sans: 'Mori', Arial, Helvetica, sans-serif;
  --font-mono: 'Fraktion Mono', monospace;
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}
.light {
  --background: #fff;
  --foreground: #171717;
}

body {
  margin: 0;
  font-family: var(--font-sans);
  font-size: 1rem;
  line-height: 1.45;
  background-color: var(--background);
}

html {
  scroll-behavior: smooth;
}

/* lovely fluid fonts */

:root {
  --fluid-min-width: 320;
  --fluid-max-width: 1140;

  --fluid-screen: 100vw;
  --fluid-bp: calc(
    (var(--fluid-screen) - var(--fluid-min-width) / 16 * 1rem) /
      (var(--fluid-max-width) - var(--fluid-min-width))
  );
}

@media screen and (min-width: 1140px) {
  :root {
    --fluid-screen: calc(var(--fluid-max-width) * 1px);
  }
}

:root {
  --f-0-min: 16;
  --f-0-max: 18;
  --step-0: calc(
    ((var(--f-0-min) / 16) * 1rem) + (var(--f-0-max) - var(--f-0-min)) *
      var(--fluid-bp)
  );

  --f-1-min: 16;
  --f-1-max: 22.5;
  --step-1: calc(
    ((var(--f-1-min) / 16) * 1rem) + (var(--f-1-max) - var(--f-1-min)) *
      var(--fluid-bp)
  );

  --f-2-min: 23.04;
  --f-2-max: 28.13;
  --step-2: calc(
    ((var(--f-2-min) / 16) * 1rem) + (var(--f-2-max) - var(--f-2-min)) *
      var(--fluid-bp)
  );

  --f-3-min: 27.65;
  --f-3-max: 35.16;
  --step-3: calc(
    ((var(--f-3-min) / 16) * 1rem) + (var(--f-3-max) - var(--f-3-min)) *
      var(--fluid-bp)
  );

  --f-4-min: 33.18;
  --f-4-max: 46;
  --step-4: calc(
    ((var(--f-4-min) / 16) * 1rem) + (var(--f-4-max) - var(--f-4-min)) *
      var(--fluid-bp)
  );
}

/* fluid paddings */

:root {
  --fluid-min-width: 320;
  --fluid-max-width: 1140;

  --fluid-screen: 100vw;
  --fluid-bp: calc(
    (var(--fluid-screen) - var(--fluid-min-width) / 16 * 1rem) /
      (var(--fluid-max-width) - var(--fluid-min-width))
  );
}

@media screen and (min-width: 1140px) {
  :root {
    --fluid-screen: calc(var(--fluid-max-width) * 1px);
  }
}

:root {
  --fc-s-min: (var(--f-0-min, 21));
  --fc-s-max: (var(--f-0-max, 24));

  --fc-m-min: (var(--fc-s-min) * 6);
  --fc-m-max: (var(--fc-s-max) * 6);

  --fc-l-min: (var(--fc-s-min) * 8);
  --fc-l-max: (var(--fc-s-max) * 8);

  --fc-xl-min: (var(--fc-s-min) * 10);
  --fc-xl-max: (var(--fc-s-max) * 10);

  /* T-shirt sizes */
  --space-s: calc(
    ((var(--fc-s-min) / 16) * 1rem) + (var(--fc-s-max) - var(--fc-s-min)) *
      var(--fluid-bp)
  );
  --space-m: calc(
    ((var(--fc-m-min) / 16) * 1rem) + (var(--fc-m-max) - var(--fc-m-min)) *
      var(--fluid-bp)
  );
  --space-l: calc(
    ((var(--fc-l-min) / 16) * 1rem) + (var(--fc-l-max) - var(--fc-l-min)) *
      var(--fluid-bp)
  );
  --space-xl: calc(
    ((var(--fc-xl-min) / 16) * 1rem) + (var(--fc-xl-max) - var(--fc-xl-min)) *
      var(--fluid-bp)
  );

  /* One-up pairs */
  --space-s-m: calc(
    ((var(--fc-s-min) / 16) * 1rem) + (var(--fc-m-max) - var(--fc-s-min)) *
      var(--fluid-bp)
  );
  --space-m-l: calc(
    ((var(--fc-m-min) / 16) * 1rem) + (var(--fc-l-max) - var(--fc-m-min)) *
      var(--fluid-bp)
  );
  --space-l-xl: calc(
    ((var(--fc-l-min) / 16) * 1rem) + (var(--fc-xl-max) - var(--fc-l-min)) *
      var(--fluid-bp)
  );
}

body {
  color: var(--color-surface-white);
  background-color: var(--dark);
  font-family: Mori, sans-serif;
  font-weight: 400;
  margin: 0;
  font-size: var(--step-0);
  line-height: 1.45;
}

body {
  overscroll-behavior: none;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

.header {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

#smooth-content .home {
  overflow: visible;
  width: 100%;
  /* set a height because the contents are position: absolute, thus natively there's no height */
  height: 4000px;
  padding-top: 80px;

  background-image: linear-gradient(
      rgba(255, 255, 255, 0.07) 2px,
      transparent 2px
    ),
    linear-gradient(90deg, rgba(255, 255, 255, 0.07) 2px, transparent 2px),
    linear-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
  background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
  background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
}

button {
  position: relative;
}

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Embossed backdrop typography utility */
.embossed-backdrop {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 2rem; /* slight horizontal breathing */
  font-family: var(--font-sans);
  font-weight: 600;
  font-size: clamp(5rem, 18vw, 15rem);
  line-height: .9;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: oklch(0.25 0 0); /* light gray */
  opacity: .2; /* subtle */
  pointer-events: none;
  user-select: none;
  z-index: 0;
  mix-blend-mode: multiply;
  text-shadow:
    0 3px 6px rgba(0,0,0,.18), /* drop */
    0 -3px 6px rgba(255,255,255,.4); /* highlight for embossed look */
  /* soft vignette fade so edges aren't harsh */
  -webkit-mask-image: radial-gradient(circle at 50% 50%, rgba(0,0,0,.85), transparent 75%);
          mask-image: radial-gradient(circle at 50% 50%, rgba(0,0,0,.85), transparent 75%);
}

.dark .embossed-backdrop {
  color: oklch(0.35 0 0); /* darker gray in dark mode */
  opacity: .15;
  mix-blend-mode: lighten;
  text-shadow:
    0 4px 10px rgba(0,0,0,.6),
    0 -2px 4px rgba(255,255,255,.08);
}

@media (max-width: 640px) {
  .embossed-backdrop {
    font-size: clamp(3.5rem, 26vw, 6.5rem);
    letter-spacing: .04em;
  }
}
  .font-special-elite { font-family: 'Special Elite', cursive; }
  .font-staatliches { font-family: 'Staatliches', cursive; }
  .font-kalam { font-family: 'Kalam', cursive; }

  #board {
    background: radial-gradient(ellipse at center, #4a4a4a 0%, #333333 70%, #1a1a1a 100%);
    box-shadow: inset 0 0 15px 5px rgba(0,0,0,0.5);
  }
  #board-content {
    background-image: 
      url('https://www.transparenttextures.com/patterns/black-chalkboard.png'),
      url('https://www.transparenttextures.com/patterns/subtle-grid.png');
    background-size: auto, 200px 200px;
  }
  #lighting-overlay {
     background-image: 
      radial-gradient(circle at 15% 20%, rgba(255, 255, 230, 0.25), transparent 30%),
      radial-gradient(circle at 80% 40%, rgba(255, 255, 230, 0.2), transparent 35%),
      radial-gradient(circle at 50% 85%, rgba(255, 255, 230, 0.15), transparent 40%);
  }

  .newspaper-modal-view {
    background-color: #fbf7e9; /* Base color */
    background-image:
      /* Smudge/grunge overlay */
      url('https://www.transparenttextures.com/patterns/grunge-wall.png'),
      /* Paper texture */
      url('https://www.transparenttextures.com/patterns/old-paper.png');
    background-blend-mode: multiply; /* Blends textures nicely */
    filter: sepia(0.6) contrast(1.1) brightness(0.9) grayscale(0.1);
    position: relative;
    overflow: hidden;
  }

  .newspaper-clipping-effect {
    /* Inherit background from modal view for consistency */
    background-color: #fbf7e9;
    background-image:
      url('https://www.transparenttextures.com/patterns/grunge-wall.png'),
      url('https://www.transparenttextures.com/patterns/old-paper.png');
    background-blend-mode: multiply;
    filter: sepia(0.6) contrast(1.1) brightness(0.9) grayscale(0.1);
    
    /* More realistic, irregular torn paper effect */
    clip-path: polygon(2% 4%, 15% 2%, 30% 5%, 50% 2%, 70% 4%, 85% 1%, 98% 3%, 100% 15%, 97% 30%, 99% 50%, 96% 70%, 98% 85%, 95% 98%, 80% 99%, 60% 96%, 40% 100%, 20% 97%, 5% 99%, 0% 80%, 3% 60%, 1% 30%);
    
    position: relative; /* For pseudo-element positioning */
    overflow: hidden; /* Keep fold effect inside the clipping path */
  }
  
  /* Subtle vertical fold line for both views */
  .newspaper-clipping-effect::after, .newspaper-modal-view::after {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    width: 2px;
    height: 100%;
    background: linear-gradient(to right, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 80%);
    transform: translateX(-1px);
    pointer-events: none;
  }

  @keyframes fadeInAndJiggle {
      0% { opacity: 0; transform: scale(0.8) rotate(-5deg); }
      70% { opacity: 1; transform: scale(1.05) rotate(2deg); }
      100% { opacity: 1; transform: scale(1) rotate(0deg); }
  }

  .clue-item-appear {
      animation: fadeInAndJiggle 0.5s ease-out forwards;
  }

  .clue-item-effect {
      background-color: #fdf5e6; /* A slightly creamy paper color */
      clip-path: polygon(0% 5%, 15% 0%, 30% 6%, 50% 1%, 70% 7%, 85% 2%, 100% 8%, 95% 100%, 80% 95%, 60% 100%, 40% 94%, 20% 100%, 5% 95%);
      padding: 8px 12px !important;
      box-shadow: 1px 1px 4px rgba(0,0,0,0.3);
  }